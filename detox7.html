<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>ğŸº ì•Œì½”ì˜¬ ë””í†¡ìŠ¤ ê³„ì‚°ê¸° & ì €ë„</title>
  <link rel="stylesheet" as="style" crossorigin href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/static/pretendard.css" />

  <style>
    :root{
      --bg: #F7F9FB;
      --card: #FFFFFF;
      --primary: #5989F7;
      --accent: #27AE60;
      --danger: #E74C3C;
      --muted: #6B7280;
      --border: #E6EEF6;
      --radius: 14px;
      --shadow: 0 6px 20px rgba(16,24,40,0.06);
      --tab-bar-height: 54px;
      font-family: Pretendard, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Noto Sans KR", "Helvetica Neue", Arial;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; background: linear-gradient(180deg,var(--bg), #F4F7FB); color:#16202A;
      -webkit-font-smoothing:antialiased; display:flex; flex-direction: column;
      padding: calc(var(--tab-bar-height) + 28px) 18px 28px; font-size:16px; line-height:1.4;
    }
    .app { width:100%; max-width:520px; margin: 0 auto; }
    header { text-align:center; margin-bottom:18px; }
    .title { display:flex; align-items:center; justify-content:center; gap:12px; font-weight:700; color:var(--primary); font-size:1.6rem; }
    .subtitle { color:var(--muted); font-size:0.95rem; margin-top:6px; }

    .card { background:var(--card); border-radius:var(--radius); box-shadow:var(--shadow); padding:18px; margin-bottom:14px; border:1px solid var(--border); }
    .section-title { font-size:0.98rem; font-weight:600; margin-bottom:10px; color:#243447; }

    label.small { display:block; font-size:0.85rem; color:var(--muted); margin-bottom:6px; }
    input[type="number"], select, .input-text {
      width:100%; padding:12px 14px; border-radius:10px; border:1px solid #E6EEF6; background:#FBFDFF;
      font-size:1rem; color:#102027; outline:none;
    }

    .drink-btn-group { display: grid; grid-template-columns: repeat(3, 1fr); gap: 8px; margin-bottom: 15px; }
    .drink-btn { 
        padding: 10px; border-radius: 10px; border: 2px solid #E6EEF6; background: white; 
        font-weight: 600; cursor: pointer; font-size: 0.9rem; transition: all 0.2s;
    }
    .drink-btn.active { background: var(--primary); color: white; border-color: var(--primary); }

    .add-form-row { display: grid; grid-template-columns: 1fr 1fr 1.2fr auto; gap: 8px; align-items: end; }
    .add-btn { height: 48px; padding: 0 16px; border-radius: 10px; border: none; background: var(--primary); color: white; font-weight: 700; cursor: pointer; white-space: nowrap; }

    .selected-list { margin-top: 15px; border-top: 1px dashed var(--border); padding-top: 15px; }
    .selected-item { display: flex; justify-content: space-between; align-items: center; background: #F8FAFC; padding: 10px 14px; border-radius: 8px; margin-bottom: 8px; font-size: 0.95rem; }
    .remove-btn { color: var(--danger); background: none; border: none; font-size: 1.2rem; cursor: pointer; font-weight: bold; }

    .radio-group { display:flex; gap:10px; }
    .radio-input { display:none; }
    .radio-label { flex:1; text-align:center; padding:10px; border-radius:10px; border:2px solid #E6EEF6; cursor:pointer; font-weight:600; background:white; }
    .radio-input:checked + .radio-label{ background:var(--primary); color:white; border-color:var(--primary); }

    .time-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; margin-top: 10px; }
    .time-grid select { padding: 12px 8px; font-size: 0.95rem; }

    .sub-btn { width: 100%; padding: 12px; border-radius: 12px; font-size: 0.95rem; font-weight: 700; cursor: pointer; background: #F0F5FF; color: var(--primary); border: 1px solid var(--primary); margin-top: 15px; }
    .calculate-btn { width:100%; border:0; padding:16px; border-radius:12px; font-weight:700; font-size:1.1rem; cursor:pointer; background:var(--primary); color:white; margin-top: 10px; }

    .result .big { text-align:center; font-size:1.5rem; font-weight:800; color:var(--accent); }
    .result .sub { text-align:center; color:#1B3B4D; font-weight:600; margin: 10px 0; }
    .result .meta { display:flex; justify-content:space-between; gap:12px; flex-wrap:wrap; color:#4B5860; font-size:0.95rem; margin-top:15px; border-top: 1px dashed var(--border); padding-top: 15px; }

    .disclaimer { background: rgba(231, 76, 60, 0.05); padding: 16px; border-radius: 12px; color: #6B2630; font-size: 0.88rem; line-height: 1.6; margin-top: 20px; }

    /* ì €ë„ ìŠ¤íƒ€ì¼ */
    .journal-list { list-style:none; padding:0; margin:0; }
    .journal-item { display:flex; align-items:center; gap:15px; padding:15px 0; border-bottom:1px solid var(--border); cursor:pointer; }
    .journal-item:last-child { border-bottom: none; }
    .journal-icon { font-size:1.5rem; width:44px; height:44px; background: #F0F5FF; border-radius: 10px; display: flex; align-items: center; justify-content: center; }
    .journal-content h3 { margin:0; font-size:1rem; font-weight:600; color: #16202A; }
    .journal-content p { margin:3px 0 0; font-size:0.85rem; color:var(--muted); }
    
    .journal-detail-content h3 { font-size: 1.15rem; color: #16202A; margin-top: 24px; margin-bottom: 10px; border-left: 4px solid var(--primary); padding-left: 10px; }
    .journal-detail-content p { margin-bottom: 14px; color: #4B5860; line-height: 1.7; }
    .journal-detail-content strong { color: var(--primary); }
    .journal-detail-content ul { padding-left: 20px; margin-bottom: 18px; }
    .journal-detail-content li { margin-bottom: 10px; color: #4B5860; line-height: 1.6; }
    .journal-detail-content .highlight-box { background: #F8FAFC; padding: 15px; border-radius: 10px; border: 1px solid var(--border); margin: 15px 0; }
    .journal-detail-content .detox-point { color: var(--primary); font-weight: 800; font-size: 1.1rem; margin-top: 30px; display: block; text-align: center; padding: 15px; background: #F0F5FF; border-radius: 12px; }

    .back-button { display: inline-flex; align-items: center; gap: 5px; margin-bottom: 20px; color: var(--primary); font-weight: 700; text-decoration: none; cursor: pointer; }

    .tab-bar { position:fixed; top:0; left: 50%; transform: translateX(-50%); width: 100%; max-width: 520px; height: var(--tab-bar-height); display:flex; background:var(--card); border-bottom:1px solid var(--border); box-shadow: 0 2px 8px rgba(0,0,0,0.08); z-index:1000; }
    .tab-item { display:flex; align-items:center; justify-content:center; text-decoration:none; color:var(--muted); font-size:0.9rem; font-weight:700; flex: 1; gap: 6px; border-bottom: 3px solid transparent; }
    .tab-item.active { color:var(--primary); border-bottom: 3px solid var(--primary); }
  </style>
</head>
<body>
  <main class="app">
    <div id="calculatorContent">
        <header>
          <div class="title">ğŸº ì•Œì½”ì˜¬ ë””í†¡ìŠ¤ ê³„ì‚°ê¸°</div>
          <div class="subtitle">ì…ë ¥í•œ ì •ë³´ë¡œ ì˜ˆìƒ í•´ë… ì‹œê°ì„ ì•Œë ¤ë“œë¦½ë‹ˆë‹¤. (ì°¸ê³ ìš©)</div>
        </header>
    
        <section class="card">
            <div class="section-title">ê¸°ë³¸ ì •ë³´</div>
            <div class="radio-group" style="margin-bottom:12px;">
                <input class="radio-input" type="radio" id="gender-male" name="gender" value="male" checked>
                <label class="radio-label" for="gender-male">ğŸ§‘ ë‚¨ì„±</label>
                <input class="radio-input" type="radio" id="gender-female" name="gender" value="female">
                <label class="radio-label" for="gender-female">ğŸ‘© ì—¬ì„±</label>
            </div>
            <input id="weight" type="number" inputmode="decimal" step="0.1" placeholder="ì²´ì¤‘ (kg) ì…ë ¥" />
        </section>

        <section class="card">
            <div class="section-title">ì´ ì„­ì·¨ëŸ‰</div>
            <label class="small">ì£¼ì¢… ì„ íƒ</label>
            <div class="drink-btn-group" id="drinkBtnContainer"></div>
            <div class="add-form-row">
                <div>
                    <label class="small">ë„ìˆ˜(%)</label>
                    <input id="drinkDegree" type="number" step="0.1" placeholder="0.0" />
                </div>
                <div>
                    <label class="small">ìˆ˜ëŸ‰</label>
                    <input id="drinkQty" type="number" step="1" placeholder="0" />
                </div>
                <div>
                    <label class="small">ë‹¨ìœ„</label>
                    <select id="unitSelector"></select>
                </div>
                <button class="add-btn" id="addDrinkBtn">ì¶”ê°€</button>
            </div>
            <div class="selected-list" id="selectedDrinkList">
                <div class="muted-note" id="emptyNote" style="text-align:center; font-size:0.9rem;">ì¶”ê°€ëœ ìˆ ì´ ì—†ìŠµë‹ˆë‹¤.</div>
            </div>
        </section>
        
        <section class="card">
            <div class="section-title">ì¸¡ì • ì‹œê°</div>
            <div class="time-grid">
                <select id="inputYearMeasured"></select>
                <select id="inputMonthMeasured"></select>
                <select id="inputDayMeasured"></select>
                <select id="inputAmPmMeasured"><option value="AM">ì˜¤ì „</option><option value="PM">ì˜¤í›„</option></select>
                <select id="inputHourMeasured"></select>
                <select id="inputMinuteMeasured"></select>
            </div>
            <button id="resetTimeBtn" class="sub-btn" type="button">ğŸ”„ í˜„ì¬ ì‹œê°ìœ¼ë¡œ ì¬ì„¤ì •</button>
        </section>

        <button id="calculateBtn" class="calculate-btn" type="button" style="margin-top:10px;">ì¸¡ì •í•˜ê¸°</button>

        <section id="resultArea" class="card" style="margin-top:14px">
            <div id="resultInitial" class="result"><div class="section-title">ê²°ê³¼</div><div class="muted-note">ì •ë³´ë¥¼ ì…ë ¥í•˜ê³  ì¸¡ì • ë²„íŠ¼ì„ ëˆŒëŸ¬ì£¼ì„¸ìš”.</div></div>
            <div id="resultOutput" style="display:none"></div>
        </section>

        <div class="disclaimer">âš ï¸ <strong>ì£¼ì˜</strong> ë³¸ ê³„ì‚°ê¸°ëŠ” ìœ„ë“œë§ˆí¬ ê³µì‹ì„ ì´ìš©í•œ ì´ë¡ ì ì¸ ì¶”ì •ì¹˜ë¥¼ ì œê³µí•©ë‹ˆë‹¤. ì‹¤ì œ í•´ë… ì‹œê°„ì€ ê°œì¸ì˜ ì‹ ì²´ ìƒíƒœì— ë”°ë¼ ë‹¬ë¼ì§€ë¯€ë¡œ ë²•ì  ê·¼ê±°ë¡œ ì‚¬ìš©í•˜ì§€ ë§ˆì„¸ìš”.</div>
    </div>

    <div id="journalContent" style="display:none;">
        <header>
            <div class="title">ğŸ“° ë””í†¡ìŠ¤ ì €ë„</div>
            <div class="subtitle">ê±´ê°•í•œ íšŒë³µì„ ë•ëŠ” ìœ ìµí•œ ì •ë³´ ê°€ì´ë“œ</div>
        </header>
        <section class="card"><ul class="journal-list" id="journalListItems"></ul></section>
    </div>

    <div id="journalDetailPage" style="display:none;">
        <header>
            <div class="back-button" onclick="showTab('journal')">â† ëª©ë¡ìœ¼ë¡œ ëŒì•„ê°€ê¸°</div>
            <h2 id="detailTitle" style="text-align:center; margin-bottom: 20px;"></h2>
        </header>
        <section class="card detail-card"><div id="detailContent" class="journal-detail-content"></div></section>
        <section style="height: 40px;"></section>
    </div>
  </main>

  <nav class="tab-bar">
    <a href="#calculator" class="tab-item active" data-tab="calculator"><span>â³</span><span>ê³„ì‚°ê¸°</span></a>
    <a href="#journal" class="tab-item" data-tab="journal"><span>ğŸ“°</span><span>ë””í†¡ìŠ¤ ì €ë„</span></a>
  </nav>

  <script>
    const ALCOHOL_SPECIFIC_GRAVITY = 0.7894; 
    const ABSORPTION_RATE = 0.70;             
    const BETA_RATE = 0.013; 

    const DRINK_DATA = {
      soju: { name: 'ì†Œì£¼', deg: 16.5, units: {'ì”(50mL)':50,'ë³‘(360mL)':360} },
      beer: { name: 'ë§¥ì£¼', deg: 5.0, units: {'ìº”(500mL)':500,'ìº”(350mL)':350,'ë³‘(500mL)':500} },
      makgeolli: { name: 'ë§‰ê±¸ë¦¬', deg: 6.0, units: {'ë³‘(750mL)': 750, 'ì”(300mL)': 300} },
      wine: { name: 'ì™€ì¸', deg: 13.0, units: {'ì”(125mL)':125,'ë³‘(750mL)':750} },
      whiskey: { name: 'ìœ„ìŠ¤í‚¤', deg: 40.0, units: {'ìƒ·(30mL)':30,'ë³‘(750mL)':750} },
      custom: { name: 'ê¸°íƒ€', deg: 0, units: {'mL':1} }
    };

    const JOURNAL_CONTENT = {
        detoxMyths: { 
            title: "í•´ì¥ íš¨ê³¼, ì§„ì§œ vs ì˜¤í•´", 
            icon: "ğŸ˜µâ€ğŸ’«", 
            html: `
                <p>ìˆ™ì·¨ê°€ ì‹¬í• ìˆ˜ë¡ ê³ í†µì„ ë¹¨ë¦¬ ìŠê¸° ìœ„í•´ ë¯¼ê°„ìš”ë²•ì„ ì‹œë„í•˜ì§€ë§Œ, ê²€ì¦ë˜ì§€ ì•Šì€ ë°©ë²•ì€ ê°„ íšŒë³µì„ ë”ë””ê²Œ ë§Œë“­ë‹ˆë‹¤.</p>
                <h3>ğŸº í•´ì¥ìˆ : ë…ì„ ë…ìœ¼ë¡œ ì œì••í•œë‹¤?</h3>
                <p><strong>ì˜í•™ì ìœ¼ë¡œ ê°€ì¥ ìœ„í—˜í•œ ë°œìƒì…ë‹ˆë‹¤.</strong> í•´ì¥ìˆ ì€ ë‡Œì˜ ì¤‘ì¶”ì‹ ê²½ì„ ì¼ì‹œì ìœ¼ë¡œ ë‹¤ì‹œ ë§ˆë¹„ì‹œì¼œ ìˆ™ì·¨ í†µì¦ì„ ì ì‹œ ìŠê²Œ í•  ë¿ì…ë‹ˆë‹¤. ê°„ì€ ì „ë‚  ë§ˆì‹  ì•Œì½”ì˜¬ ë…ì†Œ(ì•„ì„¸íŠ¸ì•Œë°íˆë“œ)ë¥¼ ì²˜ë¦¬í•˜ëŠë¼ ì´ë¯¸ ì§€ì¹œ ìƒíƒœì´ë©°, ì—¬ê¸°ì— ì¶”ê°€ ì•Œì½”ì˜¬ì´ ë“¤ì–´ì˜¤ë©´ í•´ë… ê¸°ëŠ¥ì´ ì™„ì „íˆ ê³¼ë¶€í•˜ë˜ì–´ ê°„ ì†ìƒì´ ê°€ì†í™”ë©ë‹ˆë‹¤.</p>
                <div class="highlight-box">ğŸ’¡ <strong>ì§„ì‹¤:</strong> í•´ë…ì„ ë°©í•´í•˜ê³  ì·¨ê¸°ë¥¼ ì—°ì¥í•  ë¿ì…ë‹ˆë‹¤.</div>
                <h3>ğŸ¥µ ì‚¬ìš°ë‚˜: ë•€ìœ¼ë¡œ ì•Œì½”ì˜¬ì„ ëº€ë‹¤?</h3>
                <p>ì•Œì½”ì˜¬ì˜ 90% ì´ìƒì€ ê°„ì—ì„œ íš¨ì†Œì— ì˜í•´ ë¶„í•´ë©ë‹ˆë‹¤. ë•€ì´ë‚˜ ì†Œë³€ìœ¼ë¡œ ë°°ì¶œë˜ëŠ” ì–‘ì€ 10% ë¯¸ë§Œìœ¼ë¡œ ë§¤ìš° ì ìŠµë‹ˆë‹¤. ì˜¤íˆë ¤ ìŒì£¼ í›„ ëœ¨ê±°ìš´ ì‚¬ìš°ë‚˜ëŠ” <strong>íƒˆìˆ˜ í˜„ìƒì„ ê°€ì†í™”í•˜ì—¬ í˜ˆì¤‘ ì•Œì½”ì˜¬ ë†ë„ë¥¼ ë†’ì´ê³ </strong>, ì €í˜ˆì••ì„ ìœ ë°œí•´ ì‹¤ì‹ ì´ë‚˜ ì‹¬ì¥ ë¶€ì „ì˜ ì›ì¸ì´ ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
                <h3>â˜• ì»¤í”¼: ì •ì‹ ì´ ë“¤ë©´ ìˆ ë„ ê¹¬ë‹¤?</h3>
                <p>ì¹´í˜ì¸ì€ ê°ì„± íš¨ê³¼ê°€ ìˆì–´ ì¼ì‹œì ìœ¼ë¡œ ì¡¸ìŒì„ ì«“ì•„ì£¼ì§€ë§Œ, ì•Œì½”ì˜¬ ëŒ€ì‚¬ ì†ë„ì—ëŠ” ì˜í–¥ì„ ì£¼ì§€ ì•ŠìŠµë‹ˆë‹¤. ì˜¤íˆë ¤ ì¹´í˜ì¸ì˜ ì´ë‡¨ ì‘ìš©ì´ íƒˆìˆ˜ë¥¼ ìœ ë°œí•˜ì—¬ í•´ë…ì— í•„ìˆ˜ì ì¸ 'ìˆ˜ë¶„'ì„ ë°°ì¶œì‹œì¼œ ìˆ™ì·¨ ì¦ìƒì„ ì•…í™”ì‹œí‚¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
                <span class="detox-point">ğŸ•’ ë””í†¡ìŠ¤ í¬ì¸íŠ¸: ìˆ˜ë¶„ ì„­ì·¨, ì¶©ë¶„í•œ ìˆ˜ë©´, ê·¸ë¦¬ê³  'ì‹œê°„'ë§Œì´ ìœ ì¼í•œ í•´ë‹µì…ë‹ˆë‹¤.</span>` 
        },
        top5foods: { 
            title: "ìˆ™ì·¨ í•´ì†Œì— ì¢‹ì€ ìŒì‹ TOP 5", 
            icon: "ğŸ¥‘", 
            html: `
                <p>ìˆ  ë§ˆì‹  ë‹¤ìŒ ë‚ , ê°„ì˜ ëŒ€ì‚¬ ê³¼ì •ì„ ë•ê³  ì—ë„ˆì§€ë¥¼ ê³µê¸‰í•˜ëŠ” ì‹í’ˆì„ ì„­ì·¨í•˜ë©´ íšŒë³µ ì†ë„ê°€ ë¹¨ë¼ì§‘ë‹ˆë‹¤.</p>
                <h3>1. ê³„ë€ (ì‹œìŠ¤í…Œì¸)</h3>
                <p>ê³„ë€ì˜ 'L-ì‹œìŠ¤í…Œì¸' ì•„ë¯¸ë…¸ì‚°ì€ ìˆ™ì·¨ ì›ì¸ ë¬¼ì§ˆì¸ ì•„ì„¸íŠ¸ì•Œë°íˆë“œë¥¼ ì§ì ‘ ë¶„í•´í•˜ëŠ” íš¨ê³¼ê°€ ìˆìŠµë‹ˆë‹¤. ë˜í•œ ë…¸ë¥¸ìì˜ ì½œë¦° ì„±ë¶„ì€ ì†ìƒëœ ê°„ ì„¸í¬ ì¬ìƒì„ ë•ìŠµë‹ˆë‹¤.</p>
                <h3>2. ì½©ë‚˜ë¬¼ (ì•„ìŠ¤íŒŒë¼ê¸´ì‚°)</h3>
                <p>ì½©ë‚˜ë¬¼ ë¿Œë¦¬ì— í’ë¶€í•œ 'ì•„ìŠ¤íŒŒë¼ê¸´ì‚°'ì€ ê°„ì—ì„œ ì•Œì½”ì˜¬ ë¶„í•´ íš¨ì†Œ ìƒì„±ì„ ì´‰ì§„í•©ë‹ˆë‹¤. êµ­ë¬¼ í˜•íƒœë¡œ ì„­ì·¨í•˜ë©´ ìˆ˜ë¶„ê³¼ ì „í•´ì§ˆ ë³´ì¶©ê¹Œì§€ ë™ì‹œì— ê°€ëŠ¥í•©ë‹ˆë‹¤.</p>
                <h3>3. ë°”ë‚˜ë‚˜ (ì¹¼ë¥¨ ë³´ì¶©)</h3>
                <p>ì•Œì½”ì˜¬ì€ ì¹¼ë¥¨ì„ ëª¸ ë°–ìœ¼ë¡œ ë°°ì¶œì‹œì¼œ ê·¼ìœ¡ ê²½ë ¨ì´ë‚˜ ë‘í†µì„ ìœ ë°œí•©ë‹ˆë‹¤. ë°”ë‚˜ë‚˜ëŠ” í’ë¶€í•œ ì¹¼ë¥¨ê³¼ ë‹¹ë¶„ì„ ì œê³µí•˜ì—¬ ì „í•´ì§ˆ ê· í˜•ì„ ë¹ ë¥´ê²Œ íšŒë³µì‹œì¼œ ì¤ë‹ˆë‹¤.</p>
                <h3>4. í† ë§ˆí†  (ë¼ì´ì½”íœ)</h3>
                <p>ë¼ì´ì½”íœì€ ì•Œì½”ì˜¬ ë¶„í•´ ì‹œ ë°œìƒí•˜ëŠ” ìœ í•´ ì‚°ì†Œë¥¼ ì œê±°í•˜ê³  ê°„ì„ ë³´í˜¸í•˜ëŠ” ê°•ë ¥í•œ í•­ì‚°í™”ì œì…ë‹ˆë‹¤. ì„œì–‘ì—ì„œ í† ë§ˆí†  ì£¼ìŠ¤ë¥¼ í•´ì¥ ìŒë£Œë¡œ ì¦ê¸°ëŠ” ê³¼í•™ì ì¸ ì´ìœ ì…ë‹ˆë‹¤.</p>
                <h3>5. ê¿€ë¬¼ (ë‹¹ë¶„ & ìˆ˜ë¶„)</h3>
                <p>ê°„ì´ í•´ë…ì— ì§‘ì¤‘í•˜ëŠ” ë™ì•ˆ í˜ˆë‹¹ì´ ê¸‰ê²©íˆ ë–¨ì–´ì§‘ë‹ˆë‹¤. ê¿€ì˜ ê³¼ë‹¹ì€ í˜ˆë‹¹ì„ ë†’ì—¬ ì–´ì§€ëŸ¼ì¦ì„ ì¤„ì´ê³  ì•Œì½”ì˜¬ ë¶„í•´ ì—ë„ˆì§€ì›ì„ ê³µê¸‰í•©ë‹ˆë‹¤.</p>` 
        },
        comparetime: { 
            title: "ì£¼ì¢…ë³„ ì•Œì½”ì˜¬ ë¶„í•´ ì‹œê°„ ë¹„êµ", 
            icon: "â±ï¸", 
            html: `
                <p>í•´ë… ì‹œê°„ì€ ì£¼ì¢…ë³´ë‹¤ 'ìˆœìˆ˜ ì•Œì½”ì˜¬ì˜ ì´ëŸ‰'ì´ í•µì‹¬ì´ì§€ë§Œ, ì£¼ì¢…ë³„ íŠ¹ì„±ì— ë”°ë¼ ìˆ™ì·¨ ê°•ë„ëŠ” ë‹¬ë¼ì§‘ë‹ˆë‹¤.</p>
                <h3>ğŸ· ë°œíš¨ì£¼ (ì™€ì¸, ë§‰ê±¸ë¦¬, ë§¥ì£¼)</h3>
                <p>ë°œíš¨ ê³¼ì •ì—ì„œ ë§Œë“¤ì–´ì§€ëŠ” 'ë™ì¢… í™”í•©ë¬¼(Congeners)' ì„±ë¶„ì´ ë§ì•„ ì¦ë¥˜ì£¼ë³´ë‹¤ ìˆ™ì·¨ê°€ ì˜¤ë˜ê°€ëŠ” ê²½í–¥ì´ ìˆìŠµë‹ˆë‹¤. íŠ¹íˆ ì™€ì¸ì˜ ì´ì‚°í™”í™©ì´ë‚˜ ë§‰ê±¸ë¦¬ì˜ íš¨ëª¨ ì°Œêº¼ê¸°ëŠ” ë‘í†µì„ ìœ ë°œí•˜ëŠ” ì£¼ìš” ì›ì¸ì…ë‹ˆë‹¤.</p>
                <h3>ğŸ¥ƒ ì¦ë¥˜ì£¼ (ì†Œì£¼, ìœ„ìŠ¤í‚¤, ë³´ë“œì¹´)</h3>
                <p>ë¹„êµì  ë¶ˆìˆœë¬¼ì´ ì ì–´ ë¶„í•´ ìì²´ëŠ” ê¹”ë”í•  ìˆ˜ ìˆìœ¼ë‚˜, ë„ìˆ˜ê°€ ë†’ì•„ í˜ˆì¤‘ ì•Œì½”ì˜¬ ë†ë„ê°€ ê°€íŒŒë¥´ê²Œ ìƒìŠ¹í•©ë‹ˆë‹¤. ë‡Œì— ì „ë‹¬ë˜ëŠ” íƒ€ê²©ì´ í¬ë¯€ë¡œ ì£¼ì˜ê°€ í•„ìš”í•©ë‹ˆë‹¤.</p>
                <div class="highlight-box">
                    <strong>ê¸°ì¤€ ë°ì´í„° (ë‚¨ì„± 70kg ê¸°ì¤€):</strong><br>
                    â€¢ ì†Œì£¼ 1ë³‘: ì•½ 4~5ì‹œê°„<br>
                    â€¢ ë§¥ì£¼ 500cc: ì•½ 2~3ì‹œê°„<br>
                    â€¢ ìœ„ìŠ¤í‚¤ 2ìƒ·: ì•½ 3~4ì‹œê°„
                </div>
                <p>â€» ê°œì¸ì˜ ì²´ì¤‘ê³¼ ê°„ ëŒ€ì‚¬ ëŠ¥ë ¥ì— ë”°ë¼ ìœ„ ì‹œê°„ì˜ 2ë°° ì´ìƒ ì°¨ì´ê°€ ë‚  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>` 
        },
        safesleep: { 
            title: "ìŒì£¼ í›„ ì•ˆì „í•œ ìˆ˜ë©´ ê°€ì´ë“œ", 
            icon: "ğŸ˜´", 
            html: `
                <p>ìˆ ì„ ë§ˆì‹œê³  ë°”ë¡œ ìëŠ” ìŠµê´€ì€ ì‹ ì²´ íšŒë³µì„ ëŠ¦ì¶”ê³  ë•Œë¡œëŠ” ìƒëª…ì„ ìœ„í˜‘í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.</p>
                <h3>ğŸ›Œ ì•ˆì „í•œ ìì„¸: 'íšŒë³µ ìì„¸'</h3>
                <p>ë§Œì·¨ ìƒíƒœì—ì„œ ì²œì¥ì„ ë³´ê³  ë˜‘ë°”ë¡œ ëˆ„ì›Œ ìë‹¤ê°€ êµ¬í† ë¥¼ í•˜ë©´, í† ì‚¬ë¬¼ì´ ê¸°ë„ë¥¼ ë§‰ì•„ ì§ˆì‹í•  ìœ„í—˜ì´ ìˆìŠµë‹ˆë‹¤. <strong>ë°˜ë“œì‹œ ì˜†ìœ¼ë¡œ ëˆ„ì›Œ(ì‹¬ìŠ¤ ì²´ìœ„)</strong> ìëŠ” ê²ƒì´ ê¸°ë„ë¥¼ í™•ë³´í•˜ëŠ” ê°€ì¥ ì•ˆì „í•œ ë°©ë²•ì…ë‹ˆë‹¤.</p>
                <h3>ğŸ›Œ ìˆ˜ë©´ì˜ ì§ˆ (REM ìˆ˜ë©´ ë°©í•´)</h3>
                <p>ì•Œì½”ì˜¬ì€ ì ë“œëŠ” ì‹œê°„ì€ ì¤„ì—¬ì£¼ì§€ë§Œ, ë‡Œê°€ ê¹Šì€ ì (REM ë‹¨ê³„)ì— ë“¤ì§€ ëª»í•˜ê²Œ ë°©í•´í•©ë‹ˆë‹¤. ìëŠ” ë™ì•ˆ ë‡ŒëŠ” ì‰¬ì§€ ëª»í•˜ê³  í•´ë… ì‘ì—…ì— ë§¤ë‹¬ë¦¬ê¸° ë•Œë¬¸ì— ì•„ì¹¨ì— ì¼ì–´ë‚¬ì„ ë•Œ í”¼ë¡œê°ì´ ê·¹ì‹¬í•œ ê²ƒì…ë‹ˆë‹¤.</p>
                <h3>ğŸ›Œ ìê¸° ì „ ìˆ˜ë¶„ ë³´ì¶©</h3>
                <p>ì ë“  ë™ì•ˆì—ë„ ê°„ì€ í•´ë…ì„ ìœ„í•´ ë§ì€ ìˆ˜ë¶„ì„ ì‚¬ìš©í•©ë‹ˆë‹¤. ìê¸° ì „ ë¯¸ì§€ê·¼í•œ ë¬¼ í•œ ì»µì„ ë§ˆì‹œëŠ” ê²ƒì€ ìëŠ” ë™ì•ˆ ì§„í–‰ë  ë””í†¡ìŠ¤ ê³¼ì •ì„ ë•ëŠ” ìµœê³ ì˜ ìŠµê´€ì…ë‹ˆë‹¤.</p>` 
        },
        hydration: { 
            title: "ìˆ˜ë¶„ ë³´ì¶©ì˜ ì¤‘ìš”ì„±", 
            icon: "ğŸ’§", 
            html: `
                <p>ì•Œì½”ì˜¬ ë””í†¡ìŠ¤ì˜ í•µì‹¬ í‚¤ì›Œë“œëŠ” 'í¬ì„'ê³¼ 'ë°°ì¶œ'ì…ë‹ˆë‹¤.</p>
                <h3>ğŸ’§ íƒˆìˆ˜ì™€ì˜ ì „ìŸ</h3>
                <p>ì•Œì½”ì˜¬ì€ ë‡Œì˜ í•­ì´ë‡¨ í˜¸ë¥´ëª¬ ë¶„ë¹„ë¥¼ ì–µì œí•©ë‹ˆë‹¤. ë§ˆì‹  ìˆ  ì–‘ì˜ ì•½ 4ë°°ì— ë‹¬í•˜ëŠ” ìˆ˜ë¶„ì„ ì†Œë³€ìœ¼ë¡œ ê°•ì œ ë°°ì¶œì‹œí‚¤ê¸° ë•Œë¬¸ì— í˜ˆì•¡ì€ ê±¸ì­‰í•´ì§€ê³  ì„¸í¬ëŠ” ë©”ë§ˆë¥´ê²Œ ë©ë‹ˆë‹¤. ì´ ê³¼ì •ì—ì„œ ìˆ™ì·¨ ì¦ìƒì´ ì‹¬í™”ë©ë‹ˆë‹¤.</p>
                <h3>ğŸ’§ ë˜‘ë˜‘í•˜ê²Œ ë¬¼ ë§ˆì‹œëŠ” ë²•</h3>
                <ul>
                    <li><strong>ìˆ  í•œ ì”, ë¬¼ í•œ ì”:</strong> ìˆ ì„ ë§ˆì‹œëŠ” ë„ì¤‘ ë¬¼ì„ ìì£¼ ë§ˆì‹œë©´ í˜ˆì¤‘ ì•Œì½”ì˜¬ ë†ë„ì˜ ê¸‰ìƒìŠ¹ì„ ë§‰ê³  ìì—°ìŠ¤ëŸ¬ìš´ ë°°ì¶œì„ ìœ ë„í•©ë‹ˆë‹¤.</li>
                    <li><strong>ì´ì˜¨ ìŒë£Œ í™œìš©:</strong> ì „í•´ì§ˆì´ í’ë¶€í•œ ìŠ¤í¬ì¸  ìŒë£ŒëŠ” ë¬¼ë³´ë‹¤ ì²´ë‚´ í¡ìˆ˜ê°€ ë¹ ë¥´ë©° ì†ì‹¤ëœ ë¯¸ë„¤ë„ì„ ì¦‰ì‹œ ë³´ì¶©í•´ ì¤ë‹ˆë‹¤.</li>
                    <li><strong>ê¸°ìƒ ì§í›„ê°€ ê³¨ë“ íƒ€ì„:</strong> ì ì—ì„œ ê¹¬ ë’¤ ë§ˆì‹œëŠ” ë¬¼ í•œ ì”ì€ ë°¤ìƒˆ ì§„í–‰ëœ í•´ë… ì‘ì—…ì˜ ì°Œêº¼ê¸°ë¥¼ ì²­ì†Œí•˜ëŠ” ì—­í• ì„ í•©ë‹ˆë‹¤.</li>
                </ul>` 
        }
    };

    let selectedDrinks = [];
    let currentDrinkKey = 'soju';

    document.addEventListener('DOMContentLoaded', () => {
      renderDrinkButtons();
      renderJournalList();
      populateTimeInputs();
      updateAddForm('soju');

      document.getElementById('addDrinkBtn').addEventListener('click', () => {
          const deg = parseFloat(document.getElementById('drinkDegree').value);
          const qty = parseInt(document.getElementById('drinkQty').value);
          const unit = document.getElementById('unitSelector').value;
          if(!qty || qty <= 0) return;

          const pureAlcohol = qty * DRINK_DATA[currentDrinkKey].units[unit] * (deg / 100) * ALCOHOL_SPECIFIC_GRAVITY * ABSORPTION_RATE;
          selectedDrinks.push({ name: DRINK_DATA[currentDrinkKey].name, qty, unit, pureAlcohol });
          renderSelectedList();
          document.getElementById('drinkQty').value = '';
      });

      document.getElementById('calculateBtn').addEventListener('click', calculate);
      document.getElementById('resetTimeBtn').addEventListener('click', populateTimeInputs);
      document.querySelectorAll('.tab-item').forEach(tab => tab.addEventListener('click', handleTabClick));
    });

    function renderDrinkButtons() {
        const container = document.getElementById('drinkBtnContainer');
        container.innerHTML = Object.keys(DRINK_DATA).map(k => `
            <button class="drink-btn ${k==='soju'?'active':''}" onclick="selectDrinkType('${k}', this)">${DRINK_DATA[k].name}</button>
        `).join('');
    }

    window.selectDrinkType = (key, btn) => {
        document.querySelectorAll('.drink-btn').forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
        currentDrinkKey = key;
        updateAddForm(key);
    };

    function updateAddForm(key) {
        document.getElementById('drinkDegree').value = DRINK_DATA[key].deg || '';
        document.getElementById('unitSelector').innerHTML = Object.keys(DRINK_DATA[key].units).map(u => `<option value="${u}">${u}</option>`).join('');
    }

    function renderSelectedList() {
        const list = document.getElementById('selectedDrinkList');
        list.innerHTML = selectedDrinks.map((d, i) => `
            <div class="selected-item">
                <span>${d.name} ${d.qty}${d.unit.split('(')[0]}</span>
                <button class="remove-btn" onclick="removeDrink(${i})">Ã—</button>
            </div>`).join('') || '<div class="muted-note" id="emptyNote" style="text-align:center; font-size:0.9rem;">ì¶”ê°€ëœ ìˆ ì´ ì—†ìŠµë‹ˆë‹¤.</div>';
    }

    window.removeDrink = (i) => { selectedDrinks.splice(i, 1); renderSelectedList(); };

    function populateTimeInputs() {
        const now = new Date();
        const hour12 = now.getHours() % 12 || 12;
        const ampm = now.getHours() >= 12 ? "PM" : "AM";
        document.getElementById('inputYearMeasured').innerHTML = `<option value="${now.getFullYear()}">${now.getFullYear()}ë…„</option>`;
        document.getElementById('inputMonthMeasured').innerHTML = Array.from({length:12}, (_,i)=>i+1).map(m => `<option value="${m}" ${m===(now.getMonth()+1)?'selected':''}>${m}ì›”</option>`).join('');
        document.getElementById('inputDayMeasured').innerHTML = Array.from({length:31}, (_,i)=>i+1).map(d => `<option value="${d}" ${d===now.getDate()?'selected':''}>${d}ì¼</option>`).join('');
        document.getElementById('inputAmPmMeasured').value = ampm;
        document.getElementById('inputHourMeasured').innerHTML = Array.from({length:12}, (_,i)=>i+1).map(h => `<option value="${h}" ${h===hour12?'selected':''}>${h}ì‹œ</option>`).join('');
        document.getElementById('inputMinuteMeasured').innerHTML = Array.from({length:60}, (_,i)=>i).map(m => `<option value="${m}" ${m===now.getMinutes()?'selected':''}>${m}ë¶„</option>`).join('');
    }

    function calculate() {
        const weight = parseFloat(document.getElementById('weight').value);
        if(!weight || selectedDrinks.length === 0) { alert("ì²´ì¤‘ê³¼ ìˆ  ëª©ë¡ì„ í™•ì¸í•´ì£¼ì„¸ìš”."); return; }
        const totalAlc = selectedDrinks.reduce((sum, d) => sum + d.pureAlcohol, 0);
        const r = (document.querySelector('input[name="gender"]:checked').value === 'male') ? 0.75 : 0.60;
        const C0 = totalAlc / (weight * r * 10);
        const totalHours = C0 / BETA_RATE;

        let h = parseInt(document.getElementById('inputHourMeasured').value);
        if(document.getElementById('inputAmPmMeasured').value === "PM" && h < 12) h += 12;
        if(document.getElementById('inputAmPmMeasured').value === "AM" && h === 12) h = 0;

        const mTime = new Date(document.getElementById('inputYearMeasured').value, document.getElementById('inputMonthMeasured').value - 1, document.getElementById('inputDayMeasured').value, h, document.getElementById('inputMinuteMeasured').value);
        const cTime = new Date(mTime.getTime() + (totalHours * 3600 * 1000));
        
        document.getElementById('resultInitial').style.display = 'none';
        const resOut = document.getElementById('resultOutput');
        resOut.style.display = 'block';
        const fT = (d) => `${d.getMonth()+1}ì›” ${d.getDate()}ì¼ ${d.getHours()>=12?'ì˜¤í›„':'ì˜¤ì „'} ${d.getHours()%12||12}ì‹œ ${d.getMinutes()}ë¶„`;
        
        resOut.innerHTML = `
            <div class="section-title">â³ í•´ë… ì‹œê°„ ì¶”ì • ê²°ê³¼</div>
            <div class="result">
                <div class="big">${Math.floor(totalHours)}ì‹œê°„ ${Math.round((totalHours%1)*60)}ë¶„</div>
                <div class="sub">í•´ë… ì™„ë£Œ ì˜ˆìƒ ì‹œê°ì€<br><strong style="color:var(--primary);">${fT(cTime)}</strong> ì´ì—ìš”.</div>
                <div class="meta">
                    <div><strong>ì¸¡ì • ì‹œê° ê¸°ì¤€</strong><div style="color:#4B5860">${fT(mTime)}</div></div>
                    <div><strong>ì´ ìˆœìˆ˜ ì•Œì½”ì˜¬</strong><div style="color:#4B5860">${totalAlc.toFixed(1)}g</div></div>
                </div>
            </div>`;
        setTimeout(()=>resOut.scrollIntoView({behavior:'smooth', block:'center'}), 100);
    }

    function handleTabClick(e) {
        e.preventDefault();
        showTab(e.currentTarget.getAttribute('data-tab'));
    }

    function showTab(name) {
        document.getElementById('calculatorContent').style.display = 'none';
        document.getElementById('journalContent').style.display = 'none';
        document.getElementById('journalDetailPage').style.display = 'none';

        if (name === 'calculator') {
            document.getElementById('calculatorContent').style.display = 'block';
        } else if (name === 'journal') {
            document.getElementById('journalContent').style.display = 'block';
        }
        document.querySelectorAll('.tab-item').forEach(t => t.classList.toggle('active', t.getAttribute('data-tab') === name));
        window.scrollTo(0,0);
    }

    function renderJournalList() {
        document.getElementById('journalListItems').innerHTML = Object.keys(JOURNAL_CONTENT).map(id => `
            <li class="journal-item" onclick="showJournalDetail('${id}')">
                <div class="journal-icon">${JOURNAL_CONTENT[id].icon}</div>
                <div class="journal-content"><h3>${JOURNAL_CONTENT[id].title}</h3><p>ì „ë¬¸ ë³´ê¸°</p></div>
            </li>`).join('');
    }

    window.showJournalDetail = function(id) {
        const item = JOURNAL_CONTENT[id];
        document.getElementById('calculatorContent').style.display = 'none';
        document.getElementById('journalContent').style.display = 'none';
        document.getElementById('journalDetailPage').style.display = 'block';
        document.getElementById('detailTitle').textContent = item.title;
        document.getElementById('detailContent').innerHTML = item.html;
        window.scrollTo(0,0);
    }
  </script>
</body>
</html>